# Ease State Helper

A simple Flutter state management helper that makes using Flutter's internal state management easier.

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

## Overview

Ease State Helper provides two ways to create ViewModels:

| Approach | Annotation | Build Runner |
|----------|------------|--------------|
| **VS Code Extension** | Not needed | control |
| **Code Generation** | `@ease()` required | Required | 

## Installation

```yaml
dependencies:
  ease_state_helper: ^lastest
```

---

## Option 1: VS Code Extension
**No annotation, no build_runner needed.**

### Setup

1. Install **Ease State Helper** VS Code extension
2. Add `ease_state_helper` to pubspec.yaml

### Create ViewModel

Right-click folder → **Ease: New ViewModel** → Enter name and state type.

Creates two files:

**counter_view_model.dart:**
```dart
import 'package:ease_state_helper/ease_state_helper.dart';

part 'counter_view_model.ease.dart';

class CounterViewModel extends StateNotifier<int> {
  CounterViewModel() : super(0);

  void increment() => state++;
  void decrement() => state--;
}
```

**counter_view_model.ease.dart:** (auto-generated by extension)
- `CounterViewModelProvider` widget
- `context.counterViewModel` getter
- `context.readCounterViewModel()` method
- `context.selectCounterViewModel()` selector

### Register Provider

```dart
import 'package:ease_state_helper/ease_state_helper.dart';
import 'features/counter/counter_view_model.dart';

void main() {
  runApp(
    Ease(
      providers: [
        (child) => CounterViewModelProvider(child: child),
        // add more providers here
      ],
      child: const MyApp(),
    ),
  );
}
```

### Use in Widgets

```dart
class CounterPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    // Watch - rebuilds when state changes
    final counter = context.counterViewModel;

    return Column(
      children: [
        Text('Count: ${counter.state}'),
        ElevatedButton(
          // Read - no rebuild, use for callbacks
          onPressed: () => context.readCounterViewModel().increment(),
          child: Text('Increment'),
        ),
      ],
    );
  }
}
```

---

## Option 2: Code Generation

**Requires `@ease()` annotation and build_runner.**

### Setup

```yaml
dependencies:
  ease_state_helper: ^1.0.0
  ease_annotation: ^1.0.0

dev_dependencies:
  ease_generator: ^1.0.0
  build_runner: ^2.4.0
```

### Create ViewModel

```dart
import 'package:ease_annotation/ease_annotation.dart';
import 'package:ease_state_helper/ease_state_helper.dart';

part 'counter_view_model.ease.dart';

@ease()  // Required for code generation
class CounterViewModel extends StateNotifier<int> {
  CounterViewModel() : super(0);

  void increment() => state++;
}
```

### Run Code Generation

```bash
dart run build_runner build
```

This generates:
- `counter_view_model.ease.dart` - Provider and context extensions
- `ease.g.dart` - Aggregated provider list (`$easeProviders`)

### Register Providers

Use the auto-generated `$easeProviders` list:

```dart
import 'package:ease_state_helper/ease_state_helper.dart';
import 'ease.g.dart';

void main() {
  runApp(
    Ease(
      providers: $easeProviders,  // Auto-generated list
      child: const MyApp(),
    ),
  );
}
```

---

## API Reference

### StateNotifier<T>

Base class for all ViewModels:

```dart
class MyViewModel extends StateNotifier<MyState> {
  MyViewModel() : super(MyState());

  // Get current state
  MyState get currentState => state;

  // Update state (triggers rebuild)
  void updateName(String name) {
    state = state.copyWith(name: name);
  }

  // Update based on current state
  void toggleActive() {
    update((current) => current.copyWith(active: !current.active));
  }
}
```

### Context Extensions

| Method | Subscribes | Use Case |
|--------|------------|----------|
| `context.myViewModel` | Yes | Display state in UI |
| `context.readMyViewModel()` | No | Callbacks, event handlers |
| `context.selectMyViewModel((s) => s.field)` | Partial | Only rebuild when field changes |

### Select for Performance

Use `select` when you only need part of the state:

```dart
// Bad: Rebuilds on ANY state change
final cart = context.cartViewModel;
Text('${cart.state.itemCount} items');

// Good: Rebuilds only when itemCount changes
final count = context.selectCartViewModel((s) => s.itemCount);
Text('$count items');
```

For lists, use custom equality:

```dart
final items = context.selectCartViewModel(
  (s) => s.items,
  equals: (a, b) => listEquals(a, b),
);
```

---

## Packages

| Package | Description |
|---------|-------------|
| `ease_state_helper` | Core runtime (StateNotifier, Ease widget) |
| `ease_annotation` | `@ease()` annotation (only for codegen) |
| `ease_generator` | Code generator (only for codegen) |
| `ease_devtools_extension` | DevTools integration |

---

## DevTools

Optional debugging support:

```yaml
dev_dependencies:
  ease_devtools_extension: ^1.0.0
```

```dart
void main() {
  initializeEase();  // Enable DevTools
  runApp(Ease(providers: [...], child: MyApp()));
}
```

Open Flutter DevTools → "Ease" tab to inspect states.

---

## Contributing

See [CONTRIBUTING.md](CONTRIBUTING.md).

## License

[MIT](LICENSE).

